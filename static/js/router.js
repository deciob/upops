// Generated by CoffeeScript 1.4.0

define(['backbone', 'libs/geojson_miso_parser', 'views/world_map', 'views/country_map', 'views/country_info', 'views/top', 'views/footer_viz'], function(Backbone, GeoJsonParser, WorldMap, CountryMap, CountryViz, Top, FooterViz) {
  'use strict';
  return Backbone.Router.extend({
    options: {
      columns: ["geometry", "POP1950", "POP1955", "POP1960", "POP1965", "POP1970", "POP1975", "POP1980", "POP1985", "POP1990", "POP1995", "POP2000", "POP2005", "POP2010", "POP2015", "POP2020", "POP2025", "Country", "Urban_Aggl"]
    },
    initData: function() {
      if (!this.initData.data) {
        this.initData.data = new Miso.Dataset({
          options: this.options,
          url: "static/data/urban_agglomerations_1950_2010.geojson",
          parser: GeoJsonParser
        });
      }
      return this.initData.data;
    },
    routes: {
      "": "index"
    },
    index: function() {
      var data, top;
      top = new Top();
      top.render();
      data = this.initData();
      return data.fetch({
        success: function() {
          var footer_viz, world_map;
          console.log('index:data.fetch:success', this);
          world_map = new WorldMap();
          world_map.render();
          footer_viz = new FooterViz();
          return footer_viz.render();
        },
        error: function() {
          return console.log('boooooooooooooooooooooooooooo');
        }
      });
    }
  });
});
